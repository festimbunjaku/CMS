<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Home - Movie Shop</title>
    <link rel="stylesheet" href="./css/output.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css" integrity="sha512-Kc323vGBEqzTmouAECnVceyQqyqdsSiqLQISBL29aUW4U/M7pSPA/gEUZQqv1cwx4OnYxTxve5UMg5GT6L4JJg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
</head>
<body>
    <header class="h-24 flex items-center bg-slate-200">
        <div class="container mx-auto flex items-center justify-between">
            <span class="text-3xl text-gray-500"><i class="fa-solid fa-film"></i> Movie Shop</span>
            <nav>
                <ul class="flex items-center gap-4">
                    <li><a href="index.html">Home</a></li>
                    <li><a href="shop.html">Shop</a></li>
                    <li><a href="cart.html">Cart (0)</a></li>
                    <div id="auth" class="flex flex-wrap items-center">
                        <a href="dashboard.html">Dashboard</a>
                        <a href="dashboard.html?action=logout" class="ml-4"><i class="fa-solid fa-right-from-bracket"></i></a>
                    </div>
                    <div id="guest" class="flex flex-wrap items-center">
                        <a href="register.html">Register</a>
                        <a href="login.html" class="ml-4">Login</a>
                    </div>
                </ul>
            </nav>
        </div>
    </header>

    <section id="slider" class="h-[650px] overflow-y-hidden bg-gray-50">
        <img src='https://dispatch.barnesandnoble.com/content/dam/ccr/homepage/daily/2024/09/04/30657_Quote_A1_Demon_Copperhead_09_04_24_r2.jpg' alt='' />
    </section>


    <section class="py-20">
        <div class="container mx-auto">
            <h2 class="text-3xl text-center font-semibold text-red-200">Latest movies</h2>
            <div id="latest-movies" class="grid grid-cols-4 gap-4 my-12"></div>
            <a href="shop.html" class="w-[200px] block mx-auto text-center py-2 border border-red-200 text-red-400 font-semibold">Explore more <i class="fa-solid fa-arrow-right"></i></a>
        </div>
    </section>

    <footer class="bg-slate-200">
        <div class="container mx-auto h-16 flex justify-between items-center">
            <p>Copyrights &copy; Movie Shop, 2024</p>
            <p>Developer PP Team</p>
        </div>
    </footer>

    <script type="module">
        import {authLinks} from "./modules/App.js"
        const isloggedin = localStorage.getItem('isloggedin') ?? false

        const slider = document.querySelector('#slider')
        let active_slide = 1
        const slides = [
            'https://dispatch.barnesandnoble.com/content/dam/ccr/homepage/daily/2024/09/04/30657_Quote_A1_Demon_Copperhead_09_04_24_r2.jpg',
            'https://dispatch.barnesandnoble.com/content/dam/ccr/homepage/daily/2024/09/03/30295_Quote_A1_Colored_Television_09_03_24.jpg',
            'https://dispatch.barnesandnoble.com/content/dam/ccr/homepage/daily/2024/09/03/30295_Quote_A2_Whale_Fall_09_03_24.jpg',
        ]

        const latest_movies = document.querySelector('#latest-movies')

        // update navigation links
        authLinks(isloggedin)

        // slider
        setInterval(function() {
            slider.innerHTML = `<img src='${slides[active_slide]}' alt='' />`

            active_slide++

            if(active_slide > (slides.length - 1)) {
                active_slide = 0
            }
        }, 3000)

        // latest (8) movies
        fetch(`https://api.themoviedb.org/3/discover/movie?api_key=3e52e2f5350ae60de5e2fc58e818d2a0`)
        .then(resp => resp.json())
        .then(resp => {
            const movies = resp.results.slice(0, 8)
            let movies_html = ''

            for(let movie of movies) {
                movies_html += `
                    <div class="border border-gray-200 rounded-md p-4">
                        <div class="h-52 overflow-y-hidden">
                            <img src="http://image.tmdb.org/t/p/w500${movie.backdrop_path}" />
                        </div>
                        <div class="flex items-center justify-between">
                            <div>
                                <h3 class="">${movie.title}</h3>
                                <p>${movie.release_date}</p>
                            </div>
                            <a href="movie.html?id=${movie.id}" class="w-[50px] text-center py-2 text-gray-200 border border-gray-200 hover:border-red-200 hover:text-red-400 font-semibold"><i class="fa-solid fa-arrow-right"></i></a>
                        </div>
                    </div>
                `
            }

            latest_movies.innerHTML = movies_html
        })
    </script>
</body>
</html>